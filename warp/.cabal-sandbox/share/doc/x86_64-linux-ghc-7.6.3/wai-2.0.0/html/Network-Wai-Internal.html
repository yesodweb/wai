<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Wai.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Wai-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">wai-2.0.0: Web Application Interface.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Network.Wai.Internal</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Internal constructors and helper functions. Note that no guarantees are
 given for stability of these interfaces.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:RequestM">RequestM</a> m = <a href="#v:Request">Request</a> {<ul class="subs"><li><a href="#v:requestMethod">requestMethod</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Method.html#t:Method">Method</a></li><li><a href="#v:httpVersion">httpVersion</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Version.html#t:HttpVersion">HttpVersion</a></li><li><a href="#v:rawPathInfo">rawPathInfo</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:rawQueryString">rawQueryString</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaders">requestHeaders</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></li><li><a href="#v:isSecure">isSecure</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:remoteHost">remoteHost</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/network-2.4.1.2/html/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></li><li><a href="#v:pathInfo">pathInfo</a> :: [<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/text-0.11.3.1/html/Data-Text-Internal.html#t:Text">Text</a>]</li><li><a href="#v:queryString">queryString</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-URI.html#t:Query">Query</a></li><li><a href="#v:requestBody">requestBody</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Source">Source</a> m <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:vault">vault</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/vault-0.3.0.3/html/Data-Vault-Lazy.html#t:Vault">Vault</a></li><li><a href="#v:requestBodyLength">requestBodyLength</a> :: <a href="Network-Wai-Internal.html#t:RequestBodyLength">RequestBodyLength</a></li><li><a href="#v:requestHeaderHost">requestHeaderHost</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaderRange">requestHeaderRange</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Request">Request</a> = <a href="Network-Wai-Internal.html#t:RequestM">RequestM</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:ResponseM">ResponseM</a> m<ul class="subs"><li>= <a href="#v:ResponseFile">ResponseFile</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a>)  </li><li>| <a href="#v:ResponseBuilder">ResponseBuilder</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/blaze-builder-0.3.3.2/html/Blaze-ByteString-Builder-Internal-Types.html#t:Builder">Builder</a>  </li><li>| <a href="#v:ResponseSource">ResponseSource</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> (<span class="keyword">forall</span> b.  <a href="Network-Wai-Internal.html#t:WithSource">WithSource</a> m (<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Flush">Flush</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/blaze-builder-0.3.3.2/html/Blaze-ByteString-Builder-Internal-Types.html#t:Builder">Builder</a>) b)  </li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Response">Response</a> = <a href="Network-Wai-Internal.html#t:ResponseM">ResponseM</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:WithSource">WithSource</a> m a b = (<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Source">Source</a> m a -&gt; m b) -&gt; m b</li><li class="src short"><span class="keyword">data</span>  <a href="#t:RequestBodyLength">RequestBodyLength</a> <ul class="subs"><li>= <a href="#v:ChunkedBody">ChunkedBody</a>  </li><li>| <a href="#v:KnownLength">KnownLength</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Word.html#t:Word64">Word64</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:FilePart">FilePart</a>  = <a href="#v:FilePart">FilePart</a> {<ul class="subs"><li><a href="#v:filePartOffset">filePartOffset</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:filePartByteCount">filePartByteCount</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:filePartFileSize">filePartFileSize</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></li></ul>}</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:RequestM" class="def">RequestM</a> m </p><div class="doc"><p>Information on the request sent by the client. This abstracts away the
 details of the underlying implementation.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Request" class="def">Request</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:requestMethod" class="def">requestMethod</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Method.html#t:Method">Method</a></dt><dd class="doc"><p>Request method such as GET.
</p></dd><dt class="src"><a name="v:httpVersion" class="def">httpVersion</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Version.html#t:HttpVersion">HttpVersion</a></dt><dd class="doc"><p>HTTP version such as 1.1.
</p></dd><dt class="src"><a name="v:rawPathInfo" class="def">rawPathInfo</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>Extra path information sent by the client. The meaning varies slightly
 depending on backend; in a standalone server setting, this is most likely
 all information after the domain name. In a CGI application, this would be
 the information following the path to the CGI executable itself.
 Do not modify this raw value- modify pathInfo instead.
</p></dd><dt class="src"><a name="v:rawQueryString" class="def">rawQueryString</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>If no query string was specified, this should be empty. This value
 <em>will</em> include the leading question mark.
 Do not modify this raw value- modify queryString instead.
</p></dd><dt class="src"><a name="v:requestHeaders" class="def">requestHeaders</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></dt><dd class="doc"><p>A list of header (a pair of key and value) in an HTTP request.
</p></dd><dt class="src"><a name="v:isSecure" class="def">isSecure</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Was this request made over an SSL connection?
</p><p>Note that this value will <em>not</em> tell you if the client originally made
 this request over SSL, but rather whether the current connection is SSL.
 The distinction lies with reverse proxies. In many cases, the client will
 connect to a load balancer over SSL, but connect to the WAI handler
 without SSL. In such a case, <code>isSecure</code> will be <code>False</code>, but from a user
 perspective, there is a secure connection.
</p></dd><dt class="src"><a name="v:remoteHost" class="def">remoteHost</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/network-2.4.1.2/html/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></dt><dd class="doc"><p>The client's host information.
</p></dd><dt class="src"><a name="v:pathInfo" class="def">pathInfo</a> :: [<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/text-0.11.3.1/html/Data-Text-Internal.html#t:Text">Text</a>]</dt><dd class="doc"><p>Path info in individual pieces- the url without a hostname/port and without a query string, split on forward slashes,
</p></dd><dt class="src"><a name="v:queryString" class="def">queryString</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-URI.html#t:Query">Query</a></dt><dd class="doc"><p>Parsed query string information
</p></dd><dt class="src"><a name="v:requestBody" class="def">requestBody</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Source">Source</a> m <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>A request body provided as <code>Source</code>.
</p></dd><dt class="src"><a name="v:vault" class="def">vault</a> :: <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/vault-0.3.0.3/html/Data-Vault-Lazy.html#t:Vault">Vault</a></dt><dd class="doc"><p>A location for arbitrary data to be shared by applications and middleware.
</p></dd><dt class="src"><a name="v:requestBodyLength" class="def">requestBodyLength</a> :: <a href="Network-Wai-Internal.html#t:RequestBodyLength">RequestBodyLength</a></dt><dd class="doc"><p>The size of the request body. In the case of a chunked request body, this may be unknown.
</p><p>Since 1.4.0
</p></dd><dt class="src"><a name="v:requestHeaderHost" class="def">requestHeaderHost</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the Host header in a HTTP request.
</p><p>Since 2.0.0
</p></dd><dt class="src"><a name="v:requestHeaderRange" class="def">requestHeaderRange</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the Range header in a HTTP request.
</p><p>Since 2.0.0
</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Request" class="def">Request</a> = <a href="Network-Wai-Internal.html#t:RequestM">RequestM</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ResponseM" class="def">ResponseM</a> m </p><div class="doc"><p>The strange structure of the third field or ResponseSource is to allow for
 exception-safe resource allocation. As an example:
</p><pre> app :: Application
 app _ = return $ ResponseSource status200 [] $ \f -&gt; bracket
     (putStrLn &quot;Allocation&quot; &gt;&gt; return 5)
     (\i -&gt; putStrLn $ &quot;Cleaning up: &quot; ++ show i)
     (\_ -&gt; f $ do
         yield $ Chunk $ fromByteString &quot;Hello &quot;
         yield $ Chunk $ fromByteString &quot;World!&quot;)
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ResponseFile" class="def">ResponseFile</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ResponseBuilder" class="def">ResponseBuilder</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/blaze-builder-0.3.3.2/html/Blaze-ByteString-Builder-Internal-Types.html#t:Builder">Builder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ResponseSource" class="def">ResponseSource</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/http-types-0.8.3/html/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> (<span class="keyword">forall</span> b.  <a href="Network-Wai-Internal.html#t:WithSource">WithSource</a> m (<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Flush">Flush</a> <a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/blaze-builder-0.3.3.2/html/Blaze-ByteString-Builder-Internal-Types.html#t:Builder">Builder</a>) b)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Response" class="def">Response</a> = <a href="Network-Wai-Internal.html#t:ResponseM">ResponseM</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:WithSource" class="def">WithSource</a> m a b = (<a href="file:///usr/local/share/doc/x86_64-linux-ghc-7.6.3/conduit-1.0.9.3/html/Data-Conduit.html#t:Source">Source</a> m a -&gt; m b) -&gt; m b</p><div class="doc"><p>Auxiliary type for <code><a href="Network-Wai-Internal.html#v:ResponseSource">ResponseSource</a></code>.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:RequestBodyLength" class="def">RequestBodyLength</a>  </p><div class="doc"><p>The size of the request body. In the case of chunked bodies, the size will
 not be known.
</p><p>Since 1.4.0
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ChunkedBody" class="def">ChunkedBody</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:KnownLength" class="def">KnownLength</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Word.html#t:Word64">Word64</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:FilePart" class="def">FilePart</a>  </p><div class="doc"><p>Information on which part to be sent.
   Sophisticated application handles Range (and If-Range) then
   create <code><a href="Network-Wai-Internal.html#t:FilePart">FilePart</a></code>.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FilePart" class="def">FilePart</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:filePartOffset" class="def">filePartOffset</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:filePartByteCount" class="def">filePartByteCount</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:filePartFileSize" class="def">filePartFileSize</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:FilePart" class="caption collapser" onclick="toggleSection('i:FilePart')">Instances</p><div id="section.i:FilePart" class="show"><table><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>